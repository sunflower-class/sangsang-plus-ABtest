<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 기반 A/B 테스트 대시보드</title>
    <link rel="stylesheet" href="dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="main-header">
        <div class="header-container">
            <!-- Logo -->
            <div class="logo">
                <img src="logo.png" alt="상상더하기 로고" class="logo-img" />
                <span class="logo-text">상상더하기</span>
            </div>

            <!-- Navigation -->
            <nav class="nav">
                <a href="index.html" class="nav-link">홈</a>
                <a href="dashboard.html" class="nav-link active">대시보드</a>
                <a href="simple_test_simulator.html" class="nav-link">시뮬레이터</a>
                <a href="api_test_runner.html" class="nav-link">API 테스트</a>
            </nav>

            <!-- Mobile Menu Button -->
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>

        <!-- Mobile Menu -->
        <div class="mobile-menu" id="mobileMenu">
            <a href="index.html" class="mobile-nav-link">홈</a>
            <a href="dashboard.html" class="mobile-nav-link active">대시보드</a>
            <a href="simple_test_simulator.html" class="mobile-nav-link">시뮬레이터</a>
            <a href="api_test_runner.html" class="mobile-nav-link">API 테스트</a>
        </div>
    </header>

    <div class="container">
        <header class="page-header">
            <h1>🤖 AI 기반 A/B 테스트 자동화 플랫폼</h1>
            <p>실시간 테스트 현황 및 성과 분석</p>
            <div class="navigation-buttons">
                <button onclick="showAllSections()" class="nav-btn">🏠 전체 보기</button>
                <button onclick="showCreateTestSection()" class="nav-btn">🆕 새 테스트</button>
                <button onclick="showAnalysisSection()" class="nav-btn">🧠 AI 분석</button>
                <button onclick="showHistorySection()" class="nav-btn">📈 히스토리</button>
                <button onclick="window.open('simple_test_simulator.html', '_blank')" class="nav-btn">🎮 시뮬레이터</button>
                <button onclick="manualRefresh()" class="nav-btn active">🔄 새로고침</button>
            </div>
        </header>

        <div class="dashboard-grid">
            <!-- 이미지 기반 A/B 테스트 생성 섹션 -->
            <div class="card">
                <h2>🆕 이미지 기반 A/B 테스트 생성</h2>
                <form id="createImageTestForm">
                    <div class="form-group">
                        <label for="testName">테스트 이름:</label>
                        <input type="text" id="testName" name="testName" placeholder="테스트 이름을 입력하세요" required>
                    </div>
                    <div class="form-group">
                        <label for="productId">상품 ID:</label>
                        <input type="text" id="productId" name="productId" placeholder="PROD_001" required>
                    </div>
                    <div class="form-group">
                        <label for="baselineImageUrl">A안 이미지 URL:</label>
                        <input type="url" id="baselineImageUrl" name="baselineImageUrl" placeholder="https://example.com/a-image.jpg" required>
                    </div>
                    <div class="form-group">
                        <label for="challengerImageUrl">B안 이미지 URL:</label>
                        <input type="url" id="challengerImageUrl" name="challengerImageUrl" placeholder="https://example.com/b-image.jpg" required>
                    </div>
                    <div class="form-group">
                        <label for="testDuration">테스트 기간 (일):</label>
                        <input type="number" id="testDuration" name="testDuration" value="7" min="1" max="30">
                    </div>
                    <div class="form-group">
                        <label for="minSampleSize">최소 샘플 크기:</label>
                        <input type="number" id="minSampleSize" name="minSampleSize" value="100" min="10" max="10000">
                    </div>
                    <button type="submit" class="btn-primary">A/B 테스트 시작</button>
                </form>
            </div>

            <!-- 승자 선택 섹션 -->
            <div class="card" id="winnerSelectionCard" style="display: none;">
                <h2>🏆 승자 선택</h2>
                <div id="winnerSelectionContent">
                    <div class="winner-info">
                        <h3>AI 승자 결정 완료!</h3>
                        <p id="aiWinnerInfo">AI가 승자를 결정했습니다. 아래에서 최종 승자를 선택하세요.</p>
                    </div>
                    <div class="winner-buttons">
                        <button id="selectBaselineWinner" class="btn-winner" onclick="selectWinner('baseline')">A안 선택</button>
                        <button id="selectChallengerWinner" class="btn-winner" onclick="selectWinner('challenger')">B안 선택</button>
                    </div>
                </div>
            </div>

            <!-- 다음 사이클 생성 섹션 -->
            <div class="card" id="nextCycleCard" style="display: none;">
                <h2>🔄 다음 테스트 사이클 생성</h2>
                <form id="nextCycleForm">
                    <div class="form-group">
                        <label for="newChallengerImageUrl">새로운 B안 이미지 URL:</label>
                        <input type="url" id="newChallengerImageUrl" name="newChallengerImageUrl" placeholder="https://example.com/new-b-image.jpg" required>
                    </div>
                    <button type="submit" class="btn-primary">다음 사이클 시작</button>
                </form>
            </div>

            <!-- 현재 테스트 현황 -->
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <h2>📊 현재 테스트 현황</h2>
                    <button onclick="cleanupOldTests()" class="btn" style="background: hsl(var(--destructive)); color: hsl(var(--destructive-foreground)); font-size: 0.9rem;">
                        오래된 테스트 정리
                    </button>
                </div>
                <div id="currentTests">
                    <p>테스트 데이터를 불러오는 중...</p>
                </div>
            </div>

            <!-- AI 분석 결과 -->
            <div class="card">
                <h2>🧠 AI 분석 결과</h2>
                <div id="aiAnalysis">
                    <p>AI 분석 데이터를 불러오는 중...</p>
                </div>
            </div>

            <!-- 성과 지표 -->
            <div class="card">
                <h2>📈 성과 지표</h2>
                <div class="metrics-grid">
                    <div class="metric">
                        <span class="metric-value" id="totalTests">0</span>
                        <span class="metric-label">총 테스트</span>
                    </div>
                    <div class="metric">
                        <span class="metric-value" id="activeTests">0</span>
                        <span class="metric-label">활성 테스트</span>
                    </div>
                    <div class="metric">
                        <span class="metric-value" id="totalInteractions">0</span>
                        <span class="metric-label">총 상호작용</span>
                    </div>
                    <div class="metric">
                        <span class="metric-value" id="conversionRate">0%</span>
                        <span class="metric-label">전환율</span>
                    </div>
                </div>
            </div>

            <!-- 차트 섹션 -->
            <div class="card full-width">
                <h2>📊 성과 비교 차트</h2>
                <div class="chart-container" style="height: 400px !important; max-height: 400px !important; overflow: hidden;">
                    <canvas id="performanceChart" style="height: 400px !important; max-height: 400px !important;"></canvas>
                </div>
            </div>

            <!-- 최근 테스트 결과 -->
            <div class="card full-width">
                <h2>🏆 최근 테스트 결과</h2>
                <div id="recentResults">
                    <p>결과 데이터를 불러오는 중...</p>
                </div>
            </div>

            <!-- 로그 섹션 -->
            <div class="card full-width">
                <h2>📝 실시간 로그</h2>
                <div id="logs" class="logs-container">
                    <p>로그를 불러오는 중...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-grid">
                <!-- Company Info -->
                <div class="footer-section">
                    <div class="footer-logo">
                        <img src="logo.png" alt="상상더하기 로고" class="footer-logo-img" />
                        <span class="footer-logo-text">상상더하기</span>
                    </div>
                    <p class="footer-description">
                        AI 기반 A/B 테스트 자동화 플랫폼으로 더 나은 사용자 경험을 만들어보세요.
                    </p>
                </div>

                <!-- Quick Links -->
                <div class="footer-section">
                    <h3 class="footer-title">바로가기</h3>
                    <div class="footer-links">
                        <a href="index.html" class="footer-link">홈</a>
                        <a href="dashboard.html" class="footer-link">대시보드</a>
                        <a href="simple_test_simulator.html" class="footer-link">시뮬레이터</a>
                        <a href="api_test_runner.html" class="footer-link">API 테스트</a>
                    </div>
                </div>

                <!-- Support -->
                <div class="footer-section">
                    <h3 class="footer-title">지원</h3>
                    <div class="footer-links">
                        <a href="#" class="footer-link">문서</a>
                        <a href="#" class="footer-link">FAQ</a>
                        <a href="#" class="footer-link">고객지원</a>
                        <a href="#" class="footer-link">피드백</a>
                    </div>
                </div>
            </div>

            <div class="footer-bottom">
                <p class="footer-copyright">
                    © 2025 상상더하기. All rights reserved.
                </p>
            </div>
        </div>
    </footer>

    <script src="dashboard.js"></script>
    <script>
        // Mobile menu toggle
        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobileMenu');
            mobileMenu.classList.toggle('active');
        }

        // Close mobile menu when clicking outside
        document.addEventListener('click', function(event) {
            const mobileMenu = document.getElementById('mobileMenu');
            const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
            
            if (!mobileMenu.contains(event.target) && !mobileMenuBtn.contains(event.target)) {
                mobileMenu.classList.remove('active');
            }
        });
    </script>
</body>
</html>
